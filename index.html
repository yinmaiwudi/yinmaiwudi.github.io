<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‡›å†¬ä¸“å± âœ¨</title>
    <style>
        :root {
            --bg: #0f172a;
            --text: #f8fafc;
            --accent: #38bdf8;
            --accent-dark: #0ea5e9;
            --shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            --modal-bg: rgba(15, 23, 42, 0.8);
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            --3d-depth: 0 8px 30px rgba(0, 0, 0, 0.12);
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', 'PingFang SC', sans-serif;
            user-select: none;
        }
        body {
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            overflow: hidden;
            perspective: 1000px;
        }
        /* ç²’å­èƒŒæ™¯å®¹å™¨ */
        #particle-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }
        /* åŠ è½½åŠ¨ç”» */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: var(--transition);
        }
        .loader-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--glass);
            border-top: 4px solid var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        .loader-text {
            font-size: 18px;
            color: var(--text);
            opacity: 0.8;
        }
        /* æ–°å¢ï¼šå¿«æ‰‹ä¸»é¡µå›¾ç‰‡å±•ç¤ºå±‚ */
        .profile-image-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 950;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }
        .profile-image-layer.show {
            opacity: 1;
            visibility: visible;
        }
        .profile-image {
            max-width: 90%;
            max-height: 90vh;
            border-radius: 12px;
            box-shadow: 0 0 30px rgba(56, 189, 248, 0.5);
            transform: scale(0.9);
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .profile-image-layer.show .profile-image {
            transform: scale(1);
        }
        .close-profile-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        .close-profile-btn:hover {
            background: rgba(255, 255, 255, 0.4);
        }
        /* ç¡®è®¤å¼¹çª— */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--modal-bg);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 900;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            transform: translateY(20px);
        }
        .modal.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        .modal-content {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 30px 40px;
            width: 90%;
            max-width: 450px;
            text-align: center;
            box-shadow: var(--shadow);
            transform: scale(0.95);
            transition: var(--transition);
        }
        .modal.show .modal-content {
            transform: scale(1);
        }
        .modal-title {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .modal-desc {
            font-size: 18px;
            margin-bottom: 30px;
            line-height: 1.6;
            opacity: 0.9;
        }
        .confirm-btn {
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
            border: none;
            color: white;
            padding: 12px 36px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(14, 165, 233, 0.4);
            transition: var(--transition);
        }
        .confirm-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(14, 165, 233, 0.6);
        }
        .confirm-btn:active {
            transform: translateY(0);
        }
        /* ç¥ç¦å¼¹çª—ï¼ˆå¯æ‹–æ‹½ï¼‰ */
        .popup {
            position: absolute;
            width: 280px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--3d-depth);
            backdrop-filter: blur(6px);
            cursor: move;
            z-index: 100;
            transform-style: preserve-3d;
            transition: box-shadow 0.3s ease;
        }
        .popup:hover {
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.18);
        }
        .popup-header {
            padding: 12px 16px;
            font-weight: 600;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .popup-close {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        .popup-close:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        .popup-body {
            padding: 16px;
            font-size: 17px;
            line-height: 1.5;
        }
        /* éŸ³ä¹æ§åˆ¶æŒ‰é’® */
        .music-control {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
            border: none;
            color: white;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
            cursor: pointer;
            z-index: 800;
            transition: var(--transition);
        }
        .music-control:hover {
            transform: scale(1.1) rotate(5deg);
        }
        .music-control.pause {
            background: linear-gradient(135deg, #f43f5e, #e11d48);
        }
        /* åŠ¨ç”»å®šä¹‰ */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* å¼¹çª—å…¥åœºåŠ¨ç”»ï¼ˆ3Dæ•ˆæœï¼‰ */
        @keyframes popInTop {
            0% { transform: translate3d(0, -100px, -50px) scale(0.8); opacity: 0; }
            100% { transform: translate3d(0, 0, 0) scale(1); opacity: 1; }
        }
        @keyframes popInBottom {
            0% { transform: translate3d(0, 100px, -50px) scale(0.8); opacity: 0; }
            100% { transform: translate3d(0, 0, 0) scale(1); opacity: 1; }
        }
        @keyframes popInLeft {
            0% { transform: translate3d(-100px, 0, -50px) scale(0.8); opacity: 0; }
            100% { transform: translate3d(0, 0, 0) scale(1); opacity: 1; }
        }
        @keyframes popInRight {
            0% { transform: translate3d(100px, 0, -50px) scale(0.8); opacity: 0; }
            100% { transform: translate3d(0, 0, 0) scale(1); opacity: 1; }
        }
        @keyframes popInTopLeft {
            0% { transform: translate3d(-100px, -100px, -50px) scale(0.8); opacity: 0; }
            100% { transform: translate3d(0, 0, 0) scale(1); opacity: 1; }
        }
        @keyframes popInTopRight {
            0% { transform: translate3d(100px, -100px, -50px) scale(0.8); opacity: 0; }
            100% { transform: translate3d(0, 0, 0) scale(1); opacity: 1; }
        }
        @keyframes popInBottomLeft {
            0% { transform: translate3d(-100px, 100px, -50px) scale(0.8); opacity: 0; }
            100% { transform: translate3d(0, 0, 0) scale(1); opacity: 1; }
        }
        @keyframes popInBottomRight {
            0% { transform: translate3d(100px, 100px, -50px) scale(0.8); opacity: 0; }
            100% { transform: translate3d(0, 0, 0) scale(1); opacity: 1; }
        }
        /* å“åº”å¼é€‚é… */
        @media (max-width: 640px) {
            .popup {
                width: 85vw;
            }
            .modal-content {
                padding: 20px 25px;
            }
            .modal-title {
                font-size: 20px;
            }
            .modal-desc {
                font-size: 16px;
            }
            .music-control {
                width: 50px;
                height: 50px;
                font-size: 20px;
                bottom: 20px;
                right: 20px;
            }
            .close-profile-btn {
                width: 35px;
                height: 35px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <!-- ç²’å­èƒŒæ™¯ -->
    <div id="particle-container"></div>
    <!-- åŠ è½½åŠ¨ç”» -->
    <div class="loader" id="loader">
        <div class="loader-spinner"></div>
        <div class="loader-text">åŠ è½½ä¸­...</div>
    </div>
    <!-- æ–°å¢ï¼šå¿«æ‰‹ä¸»é¡µå›¾ç‰‡å±•ç¤ºå±‚ -->
    <div class="profile-image-layer" id="profileLayer">
        <button class="close-profile-btn" id="closeProfileBtn">Ã—</button>
        <!-- å·²æ›¿æ¢ä¸ºå¯ç”¨JPGé“¾æ¥ï¼Œäº²æµ‹å¯è®¿é—® -->
        <img src="https://www.cccimg.com/view.php/79cb0c49fb770f6710abfa7a85e1dc89.jpg" alt="å¿«æ‰‹ä¸»é¡µ" class="profile-image">
    </div>
    <!-- ç¡®è®¤å¼¹çª— -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <h2 class="modal-title">ğŸ’ æ‚¨æœ‰ä¸€ä»½ç‰¹æ®Šçš„ç¤¼ç‰©</h2>
            <p class="modal-desc">ç‚¹å‡»ç¡®è®¤æ‹†å¼€ï¼Œå‡†å¤‡å¥½æ¥æ”¶è¿™ä»½ä¸“å±æƒŠå–œäº†å—ï¼Ÿ</p>
            <button class="confirm-btn" id="confirmBtn">ç¡®è®¤</button>
        </div>
    </div>
    <!-- éŸ³ä¹æ§åˆ¶æŒ‰é’® -->
    <button class="music-control" id="musicControl">ğŸµ</button>
    <!-- éŸ³é¢‘å…ƒç´ ï¼šå·²æ›¿æ¢ä¸ºç¬¬ä¸€ä¸ªHTMLçš„æŠ–éŸ³éŸ³é¢‘é“¾æ¥ -->
    <audio id="bgMusic" preload="auto" loop>
        <source src="https://sf5-hl-cdn-tos.douyinstatic.com/obj/ies-music/7499771397531503370.mp3" type="audio/mpeg">
    </audio>
    <script>
        // æ ¸å¿ƒå…ƒç´ è·å–
        const loader = document.getElementById('loader');
        const profileLayer = document.getElementById('profileLayer');
        const closeProfileBtn = document.getElementById('closeProfileBtn');
        const modal = document.getElementById('modal');
        const confirmBtn = document.getElementById('confirmBtn');
        const bgMusic = document.getElementById('bgMusic');
        const musicControl = document.getElementById('musicControl');
        const particleContainer = document.getElementById('particle-container');
        const body = document.body;
        // é…ç½®é¡¹
        const config = {
            popupMax: 50,          // æœ€å¤§å¼¹çª—æ•°é‡
            popupInterval: 120,    // å¼¹çª—ç”Ÿæˆé—´éš”(ms)
            particleCount: 80,     // ç²’å­æ•°é‡
            themes: [              // å¼¹çª—ä¸»é¢˜è‰²ï¼ˆæ¸å˜è‰²ï¼‰
                { header: '#38bdf8', body: 'rgba(56, 189, 248, 0.1)' },
                { header: '#8b5cf6', body: 'rgba(139, 92, 246, 0.1)' },
                { header: '#ec4899', body: 'rgba(236, 72, 153, 0.1)' },
                { header: '#10b981', body: 'rgba(16, 185, 129, 0.1)' },
                { header: '#f59e0b', body: 'rgba(245, 158, 11, 0.1)' },
                { header: '#ef4444', body: 'rgba(239, 68, 68, 0.1)' },
                { header: '#6366f1', body: 'rgba(99, 102, 241, 0.1)' },
                { header: '#14b8a6', body: 'rgba(20, 184, 166, 0.1)' },
                { header: '#f43f5e', body: 'rgba(244, 63, 94, 0.1)' }
            ],
            animations: [          // å¼¹çª—å…¥åœºåŠ¨ç”»
                'popInTop', 'popInBottom', 'popInLeft', 'popInRight',
                'popInTopLeft', 'popInTopRight', 'popInBottomLeft', 'popInBottomRight'
            ],
            blessings: [           // ç¥ç¦æ–‡æ¡ˆåº“ï¼ˆå¤šæ®µå†…å®¹ï¼‰
                'æ„¿ä½ å²å²å¹´å¹´ï¼Œå¹³å®‰å–œä¹ âœ¨',
                'æ—¥å­æ»šçƒ«ï¼Œæˆ‘ä»¬æ¥æ—¥æ–¹é•¿ ğŸ¥³',
                'ç”Ÿæ´»ç”œç”œï¼Œå¥½è¿è¿è¿ ğŸ¬',
                'ä¸‡äº‹é¡ºæ„ï¼Œä¸€è·¯ç”ŸèŠ± ğŸŒ¸',
                'ä¿æŒçƒ­çˆ±ï¼Œå¥”èµ´å±±æµ· ğŸŒŠ',
                'å¹³å®‰å–œä¹ï¼Œå¾—å¿æ‰€æ„¿ ğŸˆ',
                'æœ‰è¶£æœ‰ç›¼ï¼Œä¸è´Ÿå¿ƒä¸­çƒ­çˆ± ğŸ’–',
                'å‰è·¯æµ©æµ©è¡è¡ï¼Œä¸‡äº‹å°½å¯æœŸå¾… ğŸš€',
                'æŠŠçƒ¦æ¼ä¸¢æ‰ï¼ŒæŠŠå¿«ä¹è£…è¿›å£è¢‹ ğŸ’',
                'æ„¿ä½ çœ¼é‡Œæœ‰å…‰ï¼Œå¿ƒä¸­æœ‰çˆ±ï¼Œä¸€è·¯æ˜¥æš–èŠ±å¼€ ğŸŒ·'
            ]
        };
        // å·²ç”Ÿæˆçš„å¼¹çª—åˆ—è¡¨
        let popups = [];
        // éŸ³ä¹æ’­æ”¾çŠ¶æ€ï¼ˆåˆå§‹åŒ–ä¸ºfalseï¼Œé¿å…é‡å¤åˆ¤æ–­é”™è¯¯ï¼‰
        let isMusicPlaying = false;
        // 1. åˆå§‹åŒ–ç²’å­èƒŒæ™¯
        function initParticles() {
            for (let i = 0; i < config.particleCount; i++) {
                const particle = document.createElement('div');
                // éšæœºæ ·å¼
                const size = Math.random() * 6 + 2;
                const color = `rgba(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 0.6 + 0.2})`;
                
                particle.style.cssText = `
                    position: absolute;
                    width: ${size}px;
                    height: ${size}px;
                    background: ${color};
                    border-radius: 50%;
                    top: ${Math.random() * 100}%;
                    left: ${Math.random() * 100}%;
                    opacity: ${Math.random() * 0.8 + 0.2};
                    pointer-events: none;
                    transition: transform 0.1s ease;
                `;
                particleContainer.appendChild(particle);
                // ç²’å­åŠ¨ç”»
                animateParticle(particle);
            }
            // é¼ æ ‡ç§»åŠ¨æ—¶ç²’å­è·Ÿéšï¼ˆè§†å·®æ•ˆæœï¼‰
            document.addEventListener('mousemove', (e) => {
                const x = e.clientX / window.innerWidth - 0.5;
                const y = e.clientY / window.innerHeight - 0.5;
                
                document.querySelectorAll('#particle-container > div').forEach(particle => {
                    const depth = parseFloat(particle.style.width) * 0.8;
                    particle.style.transform = `translate3d(${x * depth}px, ${y * depth}px, 0)`;
                });
            });
        }
        // ç²’å­åŠ¨ç”»ï¼ˆæ¼‚æµ®+æ—‹è½¬ï¼‰
        function animateParticle(particle) {
            const duration = Math.random() * 20 + 10;
            const startX = parseFloat(particle.style.left);
            const startY = parseFloat(particle.style.top);
            
            // éšæœºç§»åŠ¨è·¯å¾„
            const keyframes = [
                { transform: `translate(0, 0) rotate(0deg)`, opacity: particle.style.opacity },
                { transform: `translate(${Math.random() * 40 - 20}px, ${Math.random() * -80 - 40}px) rotate(${Math.random() * 360}deg)`, opacity: 0 }
            ];
            particle.animate(keyframes, {
                duration: duration * 1000,
                iterations: Infinity,
                easing: 'cubic-bezier(0.4, 0, 0.2, 1)'
            });
            // é‡ç½®ä½ç½®
            setTimeout(() => {
                particle.style.top = '100%';
                particle.style.left = `${Math.random() * 100}%`;
            }, duration * 1000 - 500);
        }
        // 2. åˆ›å»ºç¥ç¦å¼¹çª—ï¼ˆæ”¯æŒæ‹–æ‹½ï¼‰
        function createPopup() {
            // é™åˆ¶æœ€å¤§æ•°é‡
            if (popups.length >= config.popupMax) {
                removePopup(popups[0]);
            }
            // éšæœºé€‰æ‹©é…ç½®
            const theme = config.themes[Math.floor(Math.random() * config.themes.length)];
            const animation = config.animations[Math.floor(Math.random() * config.animations.length)];
            const blessing = config.blessings[Math.floor(Math.random() * config.blessings.length)];
            // åˆ›å»ºå¼¹çª—å…ƒç´ 
            const popup = document.createElement('div');
            popup.className = 'popup';
            popup.style.animation = `${animation} 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards`;
            
            // è®¾ç½®ä¸»é¢˜è‰²
            popup.innerHTML = `
                <div class="popup-header" style="background: ${theme.header}">
                    <span>æç¤º ğŸ’</span>
                    <button class="popup-close">Ã—</button>
                </div>
                <div class="popup-body" style="background: ${theme.body}; color: var(--text)">
                    ${blessing}
                </div>
            `;
            // éšæœºä½ç½®ï¼ˆé¿å…è¶…å‡ºå±å¹•ï¼‰
            const maxX = window.innerWidth - popup.offsetWidth - 20;
            const maxY = window.innerHeight - popup.offsetHeight - 20;
            const posX = Math.random() * maxX + 10;
            const posY = Math.random() * maxY + 10;
            
            popup.style.left = `${posX}px`;
            popup.style.top = `${posY}px`;
            // æ·»åŠ åˆ°é¡µé¢
            document.body.appendChild(popup);
            popups.push(popup);
            // ç»‘å®šå…³é—­æŒ‰é’®
            const closeBtn = popup.querySelector('.popup-close');
            closeBtn.addEventListener('click', () => removePopup(popup));
            // ç»‘å®šæ‹–æ‹½åŠŸèƒ½
            makeDraggable(popup);
        }
        // å¼¹çª—æ‹–æ‹½åŠŸèƒ½
        function makeDraggable(element) {
            let isDragging = false;
            let offsetX, offsetY;
            element.addEventListener('mousedown', (e) => {
                isDragging = true;
                // æå‡å±‚çº§
                element.style.zIndex = 200;
                // è®¡ç®—åç§»é‡
                offsetX = e.clientX - element.getBoundingClientRect().left;
                offsetY = e.clientY - element.getBoundingClientRect().top;
                // é¼ æ ‡æ ·å¼
                element.style.cursor = 'grabbing';
                // 3DæŠ¬èµ·æ•ˆæœ
                element.style.transform = 'translate3d(0, 0, 10px) scale(1.02)';
            });
            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                
                // è®¡ç®—æ–°ä½ç½®
                let x = e.clientX - offsetX;
                let y = e.clientY - offsetY;
                // è¾¹ç•Œé™åˆ¶
                x = Math.max(0, Math.min(x, window.innerWidth - element.offsetWidth));
                y = Math.max(0, Math.min(y, window.innerHeight - element.offsetHeight));
                element.style.left = `${x}px`;
                element.style.top = `${y}px`;
            });
            document.addEventListener('mouseup', () => {
                if (isDragging) {
                    isDragging = false;
                    element.style.cursor = 'move';
                    element.style.zIndex = 100;
                    element.style.transform = 'translate3d(0, 0, 0) scale(1)';
                }
            });
        }
        // ç§»é™¤å¼¹çª—
        function removePopup(popup) {
            // é€€åœºåŠ¨ç”»
            popup.style.opacity = 0;
            popup.style.transform = 'scale(0.8) translate3d(0, 0, -20px)';
            popup.style.transition = 'all 0.3s ease';
            setTimeout(() => {
                popup.remove();
                // ä»åˆ—è¡¨ä¸­åˆ é™¤
                popups = popups.filter(p => p !== popup);
            }, 300);
        }
        // 3. éŸ³ä¹æ§åˆ¶ï¼ˆæ ¸å¿ƒä¿®å¤ï¼šæ‹†åˆ†æ’­æ”¾/æš‚åœé€»è¾‘ï¼Œé¿å…é‡å¤è§¦å‘ï¼‰
        // å•ç‹¬æ’­æ”¾éŸ³ä¹å‡½æ•°
        function playMusic() {
            if (isMusicPlaying) return; // å·²æ’­æ”¾åˆ™ç›´æ¥è¿”å›ï¼Œä¸é‡å¤æ“ä½œ
            const playPromise = bgMusic.play();
            if (playPromise) {
                playPromise.then(() => {
                    updateMusicState(true);
                }).catch(() => {
                    alert('è¯·ç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®åé‡è¯•ï¼Œå³å¯æ’­æ”¾éŸ³ä¹ï½');
                    body.addEventListener('click', handleFirstClickPlay, { once: true });
                });
            }
        }
        // å•ç‹¬æš‚åœéŸ³ä¹å‡½æ•°
        function pauseMusic() {
            if (!isMusicPlaying) return; // å·²æš‚åœåˆ™ç›´æ¥è¿”å›
            bgMusic.pause();
            updateMusicState(false);
        }
        // éŸ³ä¹æ§åˆ¶æŒ‰é’®åˆ‡æ¢ï¼ˆä¿ç•™åŸäº¤äº’ï¼‰
        musicControl.addEventListener('click', () => {
            isMusicPlaying ? pauseMusic() : playMusic();
        });
        // æ›´æ–°éŸ³ä¹æ’­æ”¾çŠ¶æ€
        function updateMusicState(playing) {
            isMusicPlaying = playing;
            musicControl.textContent = playing ? 'â¸ï¸' : 'ğŸµ';
            musicControl.classList.toggle('pause', !playing);
        }
        // é¦–æ¬¡ç‚¹å‡»é¡µé¢è§¦å‘éŸ³ä¹æ’­æ”¾ï¼ˆå…¼å®¹æµè§ˆå™¨é™åˆ¶ï¼‰
        function handleFirstClickPlay() {
            bgMusic.play().then(() => {
                updateMusicState(true);
            }).catch(() => {
                alert('éŸ³ä¹æ’­æ”¾éœ€è¦æ‚¨å…è®¸éŸ³é¢‘æƒé™ï¼Œå¯æ£€æŸ¥æµè§ˆå™¨è®¾ç½®ï½');
            });
        }
        // 4. é¡µé¢åˆå§‹åŒ–æµç¨‹ï¼ˆä¿®å¤ç¡®è®¤æŒ‰é’®éŸ³ä¹é€»è¾‘ï¼‰
        function init() {
            // åˆå§‹åŒ–ç²’å­èƒŒæ™¯
            initParticles();
            // æå‰ç»‘å®šé¡µé¢ç‚¹å‡»äº‹ä»¶ï¼šç¡®ä¿é¦–æ¬¡äº¤äº’å¯è§¦å‘éŸ³ä¹
            body.addEventListener('click', handleFirstClickPlay, { once: true });
            // åŠ è½½å®Œæˆåå…ˆæ˜¾ç¤ºå¿«æ‰‹å›¾ç‰‡ï¼Œå†æ˜¾ç¤ºç¤¼ç‰©å¼¹çª—
            setTimeout(() => {
                loader.style.opacity = 0;
                setTimeout(() => {
                    loader.style.display = 'none';
                    // æ˜¾ç¤ºå¿«æ‰‹ä¸»é¡µå›¾ç‰‡
                    profileLayer.classList.add('show');
                }, 500);
            }, 1500);
            // å…³é—­å›¾ç‰‡å±‚ï¼Œæ˜¾ç¤ºç¤¼ç‰©ç¡®è®¤å¼¹çª— + å°è¯•æ’­æ”¾éŸ³ä¹
            closeProfileBtn.addEventListener('click', () => {
                profileLayer.classList.remove('show');
                setTimeout(() => {
                    modal.classList.add('show');
                    playMusic(); // ä»…æ’­æ”¾ï¼Œä¸åˆ‡æ¢çŠ¶æ€
                }, 300);
            });
            // ç¡®è®¤æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼ˆæ ¸å¿ƒä¿®å¤ï¼šåªéšè—å¼¹çª—+ç”Ÿæˆç¥ç¦ï¼Œä¸è§¦å‘éŸ³ä¹åˆ‡æ¢ï¼‰
            confirmBtn.addEventListener('click', () => {
                modal.classList.remove('show');
                // å¼€å§‹ç”Ÿæˆå¼¹çª—ï¼ˆéŸ³ä¹ä¿æŒåŸæ’­æ”¾çŠ¶æ€ï¼Œä¸é‡å¤æ§åˆ¶ï¼‰
                setInterval(createPopup, config.popupInterval);
            });
            // çª—å£å¤§å°å˜åŒ–æ—¶è°ƒæ•´å¼¹çª—ä½ç½®
            window.addEventListener('resize', () => {
                popups.forEach(popup => {
                    const x = parseFloat(popup.style.left);
                    const y = parseFloat(popup.style.top);
                    const maxX = window.innerWidth - popup.offsetWidth - 20;
                    const maxY = window.innerHeight - popup.offsetHeight - 20;
                    
                    popup.style.left = `${Math.min(x, maxX)}px`;
                    popup.style.top = `${Math.min(y, maxY)}px`;
                });
            });
        }
        // å¯åŠ¨åˆå§‹åŒ–
        window.addEventListener('load', init);
    </script>
</body>
</html>
